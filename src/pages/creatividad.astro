---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';
import ProductGrid from '../components/ProductGrid.astro';
import products from '../data/products.json';

const allPosts = await getCollection('posts');
const categoryPosts = allPosts
  .filter(post => post.data.category === 'Creatividad')
  .sort((a, b) => (b.data.pubDate?.getTime() || 0) - (a.data.pubDate?.getTime() || 0));

const categoryProducts = products.creatividad || [];
---

<Base title="Creatividad | Use&Keep">
  <div class="category-hero">
    <h1>Creatividad</h1>
    <p>Herramientas y rituales para que crear sea más fácil y placentero.</p>
  </div>

  <section class="posts-section">
    <h2>Artículos</h2>
    <div class="posts-grid">
      {categoryPosts.length > 0 ? (
        categoryPosts.map(post => (
          <div class="post-card">
            <h3>{post.data.title}</h3>
            <p class="description">{post.data.description}</p>
            <a href={`/${post.slug}/`} class="read-more">Leer artículo →</a>
          </div>
        ))
      ) : (
        <p>Aún no hay artículos en esta categoría.</p>
      )}
    </div>
  </section>

  {categoryProducts.length > 0 && (
    <ProductGrid products={categoryProducts} />
  )}
</Base>

<style>
  .category-hero {
    background: linear-gradient(135deg, #7fa895 0%, #6a9080 100%);
    color: white;
    padding: 3rem 2rem;
    border-radius: 12px;
    margin-bottom: 3rem;
    text-align: center;
  }

  .category-hero h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .category-hero p {
    font-size: 1.1rem;
    opacity: 0.95;
  }

  .posts-section h2 {
    font-size: 1.5rem;
    margin-bottom: 2rem;
    color: #2d3436;
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .post-card {
    background: #fff;
    border: 1px solid #e8e5e0;
    border-radius: 8px;
    padding: 1.5rem;
    transition: all 0.3s ease;
  }

  .post-card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-color: #7fa895;
  }

  .post-card h3 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: #2d3436;
  }

  .description {
    font-size: 0.95rem;
    color: #666;
    margin-bottom: 1rem;
    line-height: 1.5;
  }

  .read-more {
    color: #7fa895;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
  }

  .read-more:hover {
    color: #6a9080;
    text-decoration: underline;
  }
</style>
