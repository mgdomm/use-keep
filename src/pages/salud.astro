---
import Base from '../layouts/Base.astro';
import ProductGrid from '../components/ProductGrid.astro';
import { getCollection } from 'astro:content';
import products from '../data/products.json';

const allPosts = await getCollection('posts');
const categoryPosts = allPosts
  .filter(post => post.data.category === 'Salud')
  .sort((a, b) => (b.data.pubDate?.getTime() || 0) - (a.data.pubDate?.getTime() || 0));

const categoryProducts = products.salud || [];
---

<Base title="Salud | Use&Keep">
  <div class="category-hero">
    <h1>Salud</h1>
    <p>Pequeños objetos que cuidan de ti sin que te des cuenta.</p>
  </div>

  <section class="posts-section">
    <h2>Artículos</h2>
    <div class="posts-grid">
      {categoryPosts.length > 0 ? (
        categoryPosts.map(post => (
          <PostCard post={post} />
        ))
      ) : (
        <p>Aún no hay artículos en esta categoría.</p>
      )}
    </div>
  </section>

  {categoryProducts.length > 0 && (
    <ProductGrid products={categoryProducts} />
  )}
</Base>

<style>
  .category-hero {
    background: linear-gradient(135deg, #7fa895 0%, #6a9080 100%);
    color: white;
    padding: 3rem 2rem;
    border-radius: 12px;
    margin-bottom: 3rem;
    text-align: center;
  }

  .category-hero h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .category-hero p {
    font-size: 1.1rem;
    opacity: 0.95;
  }

  .posts-section h2 {
    font-size: 1.5rem;
    margin-bottom: 2rem;
    color: #2d3436;
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }
</style>
